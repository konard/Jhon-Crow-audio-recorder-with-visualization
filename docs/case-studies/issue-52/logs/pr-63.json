{"additions":82,"author":{"id":"MDQ6VXNlcjE0MzE5MDQ=","is_bot":false,"login":"konard","name":"Konstantin Diachenko"},"body":"## Summary\n\nThis PR makes the presentation window (preview window) **always sticky** - it stays on top of the main application window in **all modes by default**, addressing issue #52.\n\n### What changed\n\nThe presentation window now behaves as a true overlay - it's always on top of the main application window, regardless of the \"Window Mode\" dropdown selection (Normal, Always on Bottom, or Always on Top).\n\n### Why this change\n\nPreviously, the presentation window only stayed on top when \"Always on Top\" mode was explicitly selected. However, for a presentation overlay to be useful, it should **always** be visible above the main application window. The user clarified that the preview window should be sticky by default in all modes.\n\n### Technical implementation\n\nModified `electron/main.js`:\n\n1. **`createPresentationWindow(settings)`** (lines 109-117):\n   - After window creation, **always** sets `setAlwaysOnTop(true)` regardless of `windowMode` setting\n   - On macOS: Uses `'screen-saver'` window level for maximum stickiness (stays above fullscreen apps)\n   - On Windows/Linux: Uses standard `setAlwaysOnTop(true)` behavior\n\n2. **`presentation-update` IPC handler** (lines 269-276):\n   - When window settings are updated at runtime, maintains sticky behavior\n   - Removed mode-dependent logic - window is always sticky now\n\n### User experience\n\n- **No UI changes** - \"Window Mode\" dropdown remains in the interface\n- **Default behavior** - Presentation window is now always on top by default\n- **Consistent experience** - Works the same way across all platforms\n- **Better for streaming/presenting** - Overlay is always visible\n\n## Test plan\n\n- [x] Implementation completed\n- [x] Code syntax verified with `node -c`\n- [x] Changes committed and pushed\n- [x] Platform-specific logic for macOS maintained\n- [x] Runtime update handler simplified\n- [x] PR description updated\n\n### Manual testing recommended\n\n1. Launch the Electron app\n2. Go to \"Presentation Mode\" tab\n3. Try different \"Window Mode\" settings (Normal, Always on Bottom, Always on Top)\n4. Click \"Start Presentation\"\n5. Verify presentation window **always** stays on top of the main window in all modes\n6. Switch between modes while presentation is running\n7. Verify presentation window remains on top\n\n---\n\nFixes #52\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)","commits":[{"authoredDate":"2026-01-07T22:27:09Z","authors":[{"email":"drakonard@gmail.com","id":"MDQ6VXNlcjE0MzE5MDQ=","login":"konard","name":"konard"}],"committedDate":"2026-01-07T22:27:09Z","messageBody":"Adding CLAUDE.md with task information for AI processing.\nThis file will be removed when the task is complete.\n\nIssue: https://github.com/Jhon-Crow/audio-recorder-with-visualization/issues/52","messageHeadline":"Initial commit with task details","oid":"5bbed00f4b2c3af936ae85c958d0f4a64b2286e4"},{"authoredDate":"2026-01-07T22:33:23Z","authors":[{"email":"drakonard@gmail.com","id":"MDQ6VXNlcjE0MzE5MDQ=","login":"konard","name":"konard"},{"email":"noreply@anthropic.com","id":"MDQ6VXNlcjgxODQ3","login":"claude","name":"Claude Sonnet 4.5"}],"committedDate":"2026-01-07T22:33:23Z","messageBody":"Improved the \"Always on Top\" functionality for the presentation window to ensure it truly stays on top across all platforms.\n\n### Changes:\n- Enhanced `alwaysOnTop` implementation with platform-specific window levels\n- On macOS: Use 'screen-saver' level to keep window above even fullscreen apps\n- On Windows/Linux: Continue using standard alwaysOnTop behavior\n- Applied enhancement to both window creation and runtime updates\n- Added test documentation for sticky behavior verification\n\n### Technical Details:\n- Modified `createPresentationWindow()` to set window level after creation\n- Updated `presentation-update` IPC handler with same enhancement\n- The default \"Always on Top\" mode now provides truly sticky behavior\n- No changes to UI - enhancement is transparent to users\n\nThis ensures the presentation window reliably stays on top of the application screen as requested in the issue.\n\nFixes #52\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>","messageHeadline":"feat: Enhance sticky behavior for presentation window","oid":"a9bbd3eba4160c878a5ac4c9a56ecb522220fa5a"},{"authoredDate":"2026-01-07T22:39:48Z","authors":[{"email":"drakonard@gmail.com","id":"MDQ6VXNlcjE0MzE5MDQ=","login":"konard","name":"konard"}],"committedDate":"2026-01-07T22:39:48Z","messageBody":"This reverts commit 5bbed00f4b2c3af936ae85c958d0f4a64b2286e4.","messageHeadline":"Revert \"Initial commit with task details\"","oid":"8eef771fded675d44d5e67de69699b333e792c8c"},{"authoredDate":"2026-01-08T04:39:52Z","authors":[{"email":"drakonard@gmail.com","id":"MDQ6VXNlcjE0MzE5MDQ=","login":"konard","name":"konard"},{"email":"noreply@anthropic.com","id":"MDQ6VXNlcjgxODQ3","login":"claude","name":"Claude Sonnet 4.5"}],"committedDate":"2026-01-08T04:39:52Z","messageBody":"The presentation window now stays on top of the main application window\nregardless of the selected Window Mode setting (Normal, Always on Bottom,\nor Always on Top). This ensures the preview window is always visible\nabove the main application, which is the expected behavior for a\npresentation overlay.\n\nChanges:\n- Presentation window now uses setAlwaysOnTop(true) after creation,\n  regardless of windowMode setting\n- On macOS: Uses 'screen-saver' window level for maximum stickiness\n- On Windows/Linux: Uses standard alwaysOnTop behavior\n- Runtime updates also maintain sticky behavior\n- Window Mode dropdown is preserved for potential future use\n\nFixes #52\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>","messageHeadline":"feat: Make presentation window always sticky in all modes","oid":"c3322e5f5b2cc9b266521a20f2d515f9391ed172"},{"authoredDate":"2026-01-08T04:46:12Z","authors":[{"email":"drakonard@gmail.com","id":"MDQ6VXNlcjE0MzE5MDQ=","login":"konard","name":"konard"}],"committedDate":"2026-01-08T04:46:12Z","messageBody":"","messageHeadline":"Merge remote-tracking branch 'origin/main' into issue-52-551ed1e707d5","oid":"5d9d7f70dc650286aebc5f16f414188283307f13"}],"createdAt":"2026-01-07T22:27:17Z","deletions":14,"files":[{"path":"electron/main.js","additions":17,"deletions":14},{"path":"experiments/test-presentation-sticky.html","additions":65,"deletions":0}],"number":63,"state":"OPEN","title":"feat: Enhance sticky behavior for presentation window","updatedAt":"2026-01-08T10:38:43Z"}
